{
    "sourceFile": "src/App.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 73,
            "patches": [
                {
                    "date": 1762690665698,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1762691027185,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,10 +3,10 @@\n import { useState, useEffect } from 'react';\n \n // --- CONFIGURATION ---\n // We've updated this to the correct, stable model to fix the 404 error.\n-const GEMINI_API_URL_BASE = \"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro-latest:generateContent?key=\";\n-\n+// This is the correct, stable model and endpoint\n+const GEMINI_API_URL_BASE = \"https://generativelanguage.googleapis.com/v1/models/gemini-2.5-pro:generateContent?key=\";\n const FIXED_EVENTS = `\n     - Sleep (12am - 8am)\n     - Breakfast (8:30am - 9am)\n     - Lunch (1pm - 1:30pm)\n"
                },
                {
                    "date": 1762692138266,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,31 +1,27 @@\n-// src/App.jsx\n-\n import { useState, useEffect } from 'react';\n+import Header from './components/Header';\n+import SettingsModal from './components/SettingsModal';\n+import TaskForm from './components/TaskForm';\n+import Schedule from './components/Schedule';\n+import { getAISchedule } from './services/geminiService';\n \n-// --- CONFIGURATION ---\n-// We've updated this to the correct, stable model to fix the 404 error.\n-// This is the correct, stable model and endpoint\n-const GEMINI_API_URL_BASE = \"https://generativelanguage.googleapis.com/v1/models/gemini-2.5-pro:generateContent?key=\";\n-const FIXED_EVENTS = `\n-    - Sleep (12am - 8am)\n-    - Breakfast (8:30am - 9am)\n-    - Lunch (1pm - 1:30pm)\n-    - Dinner (7pm - 8pm)\n-    - Shower (8am - 8:30am)\n-`;\n-\n function App() {\n-  // --- STATE HOOKS ---\n+  // State\n   const [apiKey, setApiKey] = useState('');\n   const [taskInput, setTaskInput] = useState('');\n   const [generatedSchedule, setGeneratedSchedule] = useState([]);\n   const [isLoading, setIsLoading] = useState(false);\n+  const [error, setError] = useState(null);\n   const [showModal, setShowModal] = useState(false);\n-  const [error, setError] = useState(null);\n+  \n+  // New State for features\n+  const [currentTime, setCurrentTime] = useState(new Date());\n+  const [completedTasks, setCompletedTasks] = useState(new Set());\n+  const [showCompleted, setShowCompleted] = useState(false);\n \n-  // --- EFFECTS ---\n-  // Load API Key from localStorage on app start\n+\n+  // Effect for loading API key from local storage\n   useEffect(() => {\n     const savedKey = localStorage.getItem('gemini_api_key');\n     if (savedKey) {\n       setApiKey(savedKey);\n@@ -33,10 +29,18 @@\n       setShowModal(true); // Force modal open if no key\n     }\n   }, []);\n \n-  // --- FUNCTIONS ---\n+  // Effect for the real-time clock\n+  useEffect(() => {\n+    const timerId = setInterval(() => {\n+      setCurrentTime(new Date());\n+    }, 1000); // Update every second\n \n+    return () => clearInterval(timerId); // Cleanup\n+  }, []);\n+\n+  // Handlers\n   const handleSaveApiKey = () => {\n     if (apiKey) {\n       localStorage.setItem('gemini_api_key', apiKey);\n       setShowModal(false);\n@@ -58,144 +62,39 @@\n     }\n \n     setIsLoading(true);\n     setError(null);\n-    setGeneratedSchedule([]); // Clear previous results\n+    setGeneratedSchedule([]);\n \n-    // Construct the prompt\n-    const prompt = `\n-        You are an expert executive assistant. Your job is to create a complete, minute-by-minute 24-hour schedule.\n-\n-        CONTEXT:\n-        - Today is ${new Date().toLocaleDateString()}.\n-        - The user has these 'fixed' life events. These can be shifted slightly (15-30 mins) if a high-priority task conflicts, but they MUST be included:\n-        ${FIXED_EVENTS}\n-        \n-        USER TASK LIST:\n-        ${taskInput}\n-\n-        YOUR TASK:\n-        1.  Analyze the user's task list.\n-        2.  For any task without a specific time or duration, you MUST intelligently assign a 'startTime', 'estimatedDurationMinutes', and a 'priority' (low, medium, high).\n-        3.  Tasks with a set time (e.g., \"Dentist at 3 PM\") MUST be scheduled at that time.\n-        4.  Build a 24-hour schedule (from 00:00 to 23:59).\n-        5.  Fill all empty slots. If there are no user tasks, fill the time with 'Focus Work', 'Break', 'Admin Tasks', or 'Personal Time'.\n-        6.  Merge the user's tasks with the fixed events.\n-        7.  The final schedule must be a gap-free list of events for the entire day.\n-        8.  You MUST reply with ONLY a valid JSON array. Do not write any other text, explanation, or markdown.\n-\n-        OUTPUT FORMAT (JSON Array only):\n-        [\n-            {\n-                \"task\": \"Task Name\",\n-                \"startTime\": \"HH:MM\",\n-                \"endTime\": \"HH:MM\",\n-                \"priority\": \"high\"\n-            },\n-            {\n-                \"task\": \"Another Task\",\n-                \"startTime\": \"HH:MM\",\n-                \"endTime\": \"HH:MM\",\n-                \"priority\": \"low\"\n-            }\n-        ]\n-    `;\n-\n     try {\n-      const response = await fetch(GEMINI_API_URL_BASE + apiKey, {\n-        method: 'POST',\n-        headers: {\n-          'Content-Type': 'application/json',\n-        },\n-        body: JSON.stringify({\n-          contents: [{ parts: [{ text: prompt }] }]\n-        })\n-      });\n-\n-      if (!response.ok) {\n-        const errorData = await response.json();\n-        throw new Error(`API Error: ${response.status} ${response.statusText} - ${errorData.error.message}`);\n-      }\n-\n-      const data = await response.json();\n-      \n-      let jsonString = data.candidates[0].content.parts[0].text;\n-      jsonString = jsonString.replace(/```json/g, \"\").replace(/```/g, \"\").trim();\n-\n-      const schedule = JSON.parse(jsonString);\n-\n-      // Sort schedule by start time\n-      schedule.sort((a, b) => a.startTime.localeCompare(b.startTime));\n-      \n+      const schedule = await getAISchedule(taskInput, apiKey);\n       setGeneratedSchedule(schedule);\n-\n     } catch (err) {\n       console.error(err);\n       setError(err.message);\n     } finally {\n       setIsLoading(false);\n     }\n   };\n \n-  const exportToICS = () => {\n-    if (generatedSchedule.length === 0) {\n-      alert('First, generate a schedule to export.');\n-      return;\n-    }\n-\n-    let icsContent = [\n-      \"BEGIN:VCALENDAR\",\n-      \"VERSION:2.0\",\n-      \"PRODID:-//GeminiScheduler//EN\",\n-    ];\n-\n-    const today = new Date();\n-    const y = today.getFullYear();\n-    const m = String(today.getMonth() + 1).padStart(2, '0');\n-    const d = String(today.getDate()).padStart(2, '0');\n-\n-    generatedSchedule.forEach(item => {\n-      const [startH, startM] = item.startTime.split(':');\n-      const [endH, endM] = item.endTime.split(':');\n-      const dtstart = `${y}${m}${d}T${startH}${startM}00`;\n-      const dtend = `${y}${m}${d}T${endH}${endM}00`;\n-      const uid = `${dtstart}-${Math.random().toString(36).substr(2, 9)}@geminischeduler`;\n-\n-      icsContent.push(\n-        \"BEGIN:VEVENT\",\n-        `UID:${uid}`,\n-        `DTSTAMP:${dtstart}`,\n-        `DTSTART:${dtstart}`,\n-        `DTEND:${dtend}`,\n-        `SUMMARY:${item.task}`,\n-        `DESCRIPTION:Priority: ${item.priority}`,\n-        \"END:VEVENT\"\n-      );\n+  const handleToggleComplete = (taskId) => {\n+    setCompletedTasks(prevCompleted => {\n+      const newCompleted = new Set(prevCompleted);\n+      if (newCompleted.has(taskId)) {\n+        newCompleted.delete(taskId);\n+      } else {\n+        newCompleted.add(taskId);\n+      }\n+      return newCompleted;\n     });\n-\n-    icsContent.push(\"END:VCALENDAR\");\n-\n-    const blob = new Blob([icsContent.join('\\r\\n')], { type: 'text/calendar;charset=utf-8' });\n-    const link = document.createElement('a');\n-    link.href = URL.createObjectURL(blob);\n-    link.setAttribute('download', 'my-schedule.ics');\n-    document.body.appendChild(link);\n-    link.click();\n-    document.body.removeChild(link);\n   };\n \n-  // --- JSX (HTML) ---\n   return (\n     <div className=\"bg-gray-100 min-h-screen\">\n       <div className=\"container mx-auto p-4 md:p-8 max-w-3xl\">\n+        \n+        <Header />\n \n-        {/* Header */}\n-        <header className=\"text-center my-8\">\n-          <h1 className=\"text-4xl font-bold text-gray-800\">Gemini Smart Scheduler ðŸ¤–</h1>\n-          <p className=\"text-gray-600\">Let AI organize your day.</p>\n-        </header>\n-\n-        {/* API Key Settings Button */}\n         <div className=\"text-right mb-4\">\n           <button\n             onClick={() => setShowModal(true)}\n             className=\"bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg shadow\"\n@@ -203,131 +102,36 @@\n             Settings\n           </button>\n         </div>\n \n-        {/* Task Input */}\n-        <div className=\"bg-white p-6 rounded-xl shadow-lg mb-8\">\n-          <h2 className=\"text-2xl font-semibold mb-4 text-gray-700\">What's on your plate today?</h2>\n-          <textarea\n-            id=\"task-input\"\n-            className=\"w-full h-32 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n-            placeholder=\"e.g.&#10;- Write team report&#10;- Dentist at 3pm for 1 hour&#10;- Call mom&#10;- Project planning (high importance)\"\n-            value={taskInput}\n-            onChange={(e) => setTaskInput(e.target.value)}\n-          />\n-          <button\n-            id=\"generate-button\"\n-            className=\"mt-4 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition duration-300 ease-in-out disabled:bg-gray-400\"\n-            onClick={handleGenerateSchedule}\n-            disabled={isLoading}\n-          >\n-            {isLoading ? 'ðŸ§  Thinking...' : 'âœ¨ Generate Schedule'}\n-          </button>\n-        </div>\n+        <TaskForm \n+          taskInput={taskInput}\n+          setTaskInput={setTaskInput}\n+          onSubmit={handleGenerateSchedule}\n+          isLoading={isLoading}\n+        />\n \n-        {/* Schedule Output */}\n-        {(generatedSchedule.length > 0 || isLoading || error) && (\n-          <div id=\"schedule-output\" className=\"bg-white p-6 rounded-xl shadow-lg\">\n-            <div className=\"flex justify-between items-center mb-6\">\n-              <h2 className=\"text-2xl font-semibold text-gray-700\">Your Day, Organized</h2>\n-              {generatedSchedule.length > 0 && (\n-                <button\n-                  id=\"export-button\"\n-                  className=\"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg shadow\"\n-                  onClick={exportToICS}\n-                >\n-                  Export to Calendar (.ics)\n-                </button>\n-              )}\n-            </div>\n-            \n-            {/* Loading State */}\n-            {isLoading && (\n-              <div id=\"loading\" className=\"text-center p-8\">\n-                <p className=\"text-gray-600 text-lg\">ðŸ§  Gemini is thinking... this may take a moment.</p>\n-              </div>\n-            )}\n+        <Schedule\n+          schedule={generatedSchedule}\n+          isLoading={isLoading}\n+          error={error}\n+          completedTasks={completedTasks}\n+          onToggleComplete={handleToggleComplete}\n+          currentTime={currentTime}\n+          showCompleted={showCompleted}\n+          setShowCompleted={setShowCompleted}\n+        />\n \n-            {/* Error Message */}\n-            {error && (\n-              <div className=\"text-center p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg\">\n-                <p className=\"font-bold\">An Error Occurred</p>\n-                <p className=\"text-sm\">{error}</p>\n-              </div>\n-            )}\n-\n-            {/* Timeline */}\n-            <div id=\"timeline\" className=\"border-l-4 border-blue-500 pl-6 space-y-8\">\n-              {generatedSchedule.map((item, index) => (\n-                <TimelineItem key={index} item={item} index={index} />\n-              ))}\n-            </div>\n-          </div>\n-        )}\n-\n       </div>\n \n-      {/* API Key Modal */}\n-      {showModal && (\n-        <div id=\"api-key-modal\" className=\"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center\">\n-          <div className=\"bg-white p-8 rounded-lg shadow-2xl w-full max-w-md\">\n-            <h2 className=\"text-2xl font-semibold mb-4\">Settings</h2>\n-            <p className=\"text-gray-600 mb-2\">Please enter your Google Gemini API Key.</p>\n-            <input\n-              type=\"password\"\n-              id=\"api-key-input\"\n-              className=\"w-full p-2 border border-gray-300 rounded-lg mb-4\"\n-              placeholder=\"Enter your API Key\"\n-              value={apiKey}\n-              onChange={(e) => setApiKey(e.target.value)}\n-            />\n-            <button\n-              id=\"save-api-key\"\n-              className=\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg\"\n-              onClick={handleSaveApiKey}\n-            >\n-              Save\n-            </button>\n-            <button\n-              id=\"close-modal\"\n-              className=\"ml-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg\"\n-              onClick={() => setShowModal(false)}\n-            >\n-              Close\n-            </button>\n-          </div>\n-        </div>\n-      )}\n+      <SettingsModal\n+        show={showModal}\n+        onClose={() => setShowModal(false)}\n+        apiKey={apiKey}\n+        setApiKey={setApiKey}\n+        onSave={handleSaveApiKey}\n+      />\n     </div>\n   );\n }\n \n-// --- Sub-Component for Timeline Item ---\n-function TimelineItem({ item, index }) {\n-  const priorityColors = {\n-    high: 'border-red-500 bg-red-50',\n-    medium: 'border-yellow-500 bg-yellow-50',\n-    low: 'border-green-500 bg-green-50',\n-  };\n-  const colorClass = priorityColors[item.priority?.toLowerCase()] || 'border-gray-500 bg-gray-50';\n-\n-  return (\n-    <div className={`relative ${colorClass} border-l-4 p-4 rounded-r-lg shadow-sm`}>\n-      {/* The dot on the timeline */}\n-      <div className=\"absolute -left-[1.625rem] top-4 w-6 h-6 bg-blue-500 rounded-full border-4 border-white\"></div>\n-      \n-      <div className=\"flex justify-between items-start\">\n-        <div>\n-          <h3 className=\"font-semibold text-lg text-gray-800\">{item.task}</h3>\n-          <p className=\"text-blue-700 font-medium\">{item.startTime} - {item.endTime}</p>\n-        </div>\n-        {/* Task Completion Checkbox */}\n-        <div className=\"flex items-center space-x-2\">\n-          <label htmlFor={`task-${index}`} className=\"text-sm text-gray-500\">Done:</label>\n-          <input type=\"checkbox\" id={`task-${index}`} className=\"h-5 w-5 text-blue-600 rounded border-gray-300 focus:ring-blue-500\" />\n-        </div>\n-      </div>\n-    </div>\n-  );\n-}\n-\n export default App;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1762692284473,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n import Header from './components/Header';\n import SettingsModal from './components/SettingsModal';\n import TaskForm from './components/TaskForm';\n import Schedule from './components/Schedule';\n-import { getAISchedule } from './services/geminiService';\n+import { getAISchedule } from './services/geminiService.';\n \n function App() {\n   // State\n   const [apiKey, setApiKey] = useState('');\n"
                },
                {
                    "date": 1762693328079,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,10 +2,11 @@\n import Header from './components/Header';\n import SettingsModal from './components/SettingsModal';\n import TaskForm from './components/TaskForm';\n import Schedule from './components/Schedule';\n-import { getAISchedule } from './services/geminiService.';\n+import { getAISchedule } from './services/geminiService.js';\n \n+\n function App() {\n   // State\n   const [apiKey, setApiKey] = useState('');\n   const [taskInput, setTaskInput] = useState('');\n"
                },
                {
                    "date": 1762693334004,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,10 +3,10 @@\n import SettingsModal from './components/SettingsModal';\n import TaskForm from './components/TaskForm';\n import Schedule from './components/Schedule';\n import { getAISchedule } from './services/geminiService.js';\n+imp\n \n-\n function App() {\n   // State\n   const [apiKey, setApiKey] = useState('');\n   const [taskInput, setTaskInput] = useState('');\n"
                },
                {
                    "date": 1762693339240,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n import SettingsModal from './components/SettingsModal';\n import TaskForm from './components/TaskForm';\n import Schedule from './components/Schedule';\n import { getAISchedule } from './services/geminiService.js';\n-imp\n+import {pas}\n \n function App() {\n   // State\n   const [apiKey, setApiKey] = useState('');\n"
                },
                {
                    "date": 1762693345355,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n import SettingsModal from './components/SettingsModal';\n import TaskForm from './components/TaskForm';\n import Schedule from './components/Schedule';\n import { getAISchedule } from './services/geminiService.js';\n-import {pas}\n+import { par}\n \n function App() {\n   // State\n   const [apiKey, setApiKey] = useState('');\n"
                },
                {
                    "date": 1762693354142,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n import SettingsModal from './components/SettingsModal';\n import TaskForm from './components/TaskForm';\n import Schedule from './components/Schedule';\n import { getAISchedule } from './services/geminiService.js';\n-import { par}\n+import { parseTime } from './utils/timeUtils.js';\n \n function App() {\n   // State\n   const [apiKey, setApiKey] = useState('');\n"
                },
                {
                    "date": 1762693387550,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,8 +18,9 @@\n   // New State for features\n   const [currentTime, setCurrentTime] = useState(new Date());\n   const [completedTasks, setCompletedTasks] = useState(new Set());\n   const [showCompleted, setShowCompleted] = useState(false);\n+  \n \n \n   // Effect for loading API key from local storage\n   useEffect(() => {\n"
                },
                {
                    "date": 1762693393349,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,9 @@\n   // New State for features\n   const [currentTime, setCurrentTime] = useState(new Date());\n   const [completedTasks, setCompletedTasks] = useState(new Set());\n   const [showCompleted, setShowCompleted] = useState(false);\n-  \n+  const []\n \n \n   // Effect for loading API key from local storage\n   useEffect(() => {\n"
                },
                {
                    "date": 1762693398450,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,9 @@\n   // New State for features\n   const [currentTime, setCurrentTime] = useState(new Date());\n   const [completedTasks, setCompletedTasks] = useState(new Set());\n   const [showCompleted, setShowCompleted] = useState(false);\n-  const []\n+  const [freeTime]\n \n \n   // Effect for loading API key from local storage\n   useEffect(() => {\n"
                },
                {
                    "date": 1762693405965,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,9 @@\n   // New State for features\n   const [currentTime, setCurrentTime] = useState(new Date());\n   const [completedTasks, setCompletedTasks] = useState(new Set());\n   const [showCompleted, setShowCompleted] = useState(false);\n-  const [freeTime]\n+  const [freeTime, setFreeTime] = useState([]);\n \n \n   // Effect for loading API key from local storage\n   useEffect(() => {\n"
                },
                {
                    "date": 1762693411144,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,9 @@\n   // New State for features\n   const [currentTime, setCurrentTime] = useState(new Date());\n   const [completedTasks, setCompletedTasks] = useState(new Set());\n   const [showCompleted, setShowCompleted] = useState(false);\n-  const [freeTime, setFreeTime] = useState([]);\n+  const [freeTime, setFreeTime] = useState();\n \n \n   // Effect for loading API key from local storage\n   useEffect(() => {\n"
                },
                {
                    "date": 1762693418424,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,10 @@\n   // New State for features\n   const [currentTime, setCurrentTime] = useState(new Date());\n   const [completedTasks, setCompletedTasks] = useState(new Set());\n   const [showCompleted, setShowCompleted] = useState(false);\n-  const [freeTime, setFreeTime] = useState();\n+  const [freeTime, setFreeTime] = useState(null);\n+  \n \n \n   // Effect for loading API key from local storage\n   useEffect(() => {\n"
                },
                {
                    "date": 1762693424446,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n   const [currentTime, setCurrentTime] = useState(new Date());\n   const [completedTasks, setCompletedTasks] = useState(new Set());\n   const [showCompleted, setShowCompleted] = useState(false);\n   const [freeTime, setFreeTime] = useState(null);\n-  \n+  const\n \n \n   // Effect for loading API key from local storage\n   useEffect(() => {\n"
                },
                {
                    "date": 1762693435131,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n   const [currentTime, setCurrentTime] = useState(new Date());\n   const [completedTasks, setCompletedTasks] = useState(new Set());\n   const [showCompleted, setShowCompleted] = useState(false);\n   const [freeTime, setFreeTime] = useState(null);\n-  const\n+  const [unscheduledTasks, setUnscheduledTasks] = useState([]);\n \n \n   // Effect for loading API key from local storage\n   useEffect(() => {\n"
                },
                {
                    "date": 1762693478765,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -66,12 +66,22 @@\n \n     setIsLoading(true);\n     setError(null);\n     setGeneratedSchedule([]);\n+    setFreeTime(null);\n+    setUnScheduledTasks([]);\n \n     try {\n-      const schedule = await getAISchedule(taskInput, apiKey);\n-      setGeneratedSchedule(schedule);\n+      // Pass the current time to the service\n+      const { finalSchedule, couldNotSchedule } = await getAISchedule(taskInput, apiKey, currentTime);\n+      \n+      setGeneratedSchedule(finalSchedule);\n+      setUnScheduledTasks(couldNotSchedule || []);\n+      \n+      // Calculate free time after getting schedule\n+      const totalFreeMinutes = calculateFreeTime(finalSchedule);\n+      setFreeTime(totalFreeMinutes);\n+\n     } catch (err) {\n       console.error(err);\n       setError(err.message);\n     } finally {\n"
                },
                {
                    "date": 1762693589051,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,8 +99,9 @@\n       }\n       return newCompleted;\n     });\n   };\n+  \n \n   return (\n     <div className=\"bg-gray-100 min-h-screen\">\n       <div className=\"container mx-auto p-4 md:p-8 max-w-3xl\">\n"
                },
                {
                    "date": 1762693684732,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,13 +99,31 @@\n       }\n       return newCompleted;\n     });\n   };\n-  \n \n+  const calculateFreeTime = (schedule) => {\n+    let totalMinutes = 0;\n+    if (!schedule) return 0;\n+    \n+    schedule.forEach(item => {\n+      if (item.task.toLowerCase() === 'free time') {\n+        try {\n+          const startTime = parseTime(item.startTime);\n+          const endTime = parseTime(item.endTime);\n+          const durationMs = endTime.getTime() - startTime.getTime();\n+          totalMinutes += durationMs / (1000 * 60);\n+        } catch(e) {\n+          console.error(\"Error parsing free time:\", item);\n+        }\n+      }\n+    });\n+    return totalMinutes;\n+  };\n+\n   return (\n     <div className=\"bg-gray-100 min-h-screen\">\n-      <div className=\"container mx-auto p-4 md:p-8 max-w-3xl\">\n+      <div className=\"container mx-auto p-4 md:p-8 max-w-xl\">\n         \n         <Header />\n \n         <div className=\"text-right mb-4\">\n"
                },
                {
                    "date": 1762693685683,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -121,9 +121,9 @@\n   };\n \n   return (\n     <div className=\"bg-gray-100 min-h-screen\">\n-      <div className=\"container mx-auto p-4 md:p-8 max-w-xl\">\n+      <div className=\"container mx-auto p-4 md:p-8 max-w-5xl\">\n         \n         <Header />\n \n         <div className=\"text-right mb-4\">\n"
                },
                {
                    "date": 1762693761281,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -150,8 +150,9 @@\n           onToggleComplete={handleToggleComplete}\n           currentTime={currentTime}\n           showCompleted={showCompleted}\n           setShowCompleted={setShowCompleted}\n+          \n         />\n \n       </div>\n \n"
                },
                {
                    "date": 1762693767664,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -150,9 +150,9 @@\n           onToggleComplete={handleToggleComplete}\n           currentTime={currentTime}\n           showCompleted={showCompleted}\n           setShowCompleted={setShowCompleted}\n-          \n+          freeTime={freeTime}\n         />\n \n       </div>\n \n"
                },
                {
                    "date": 1762693777828,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -151,8 +151,9 @@\n           currentTime={currentTime}\n           showCompleted={showCompleted}\n           setShowCompleted={setShowCompleted}\n           freeTime={freeTime}\n+          un\n         />\n \n       </div>\n \n"
                },
                {
                    "date": 1762693787011,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -151,9 +151,9 @@\n           currentTime={currentTime}\n           showCompleted={showCompleted}\n           setShowCompleted={setShowCompleted}\n           freeTime={freeTime}\n-          un\n+          unSc\n         />\n \n       </div>\n \n"
                },
                {
                    "date": 1762693797446,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -151,9 +151,9 @@\n           currentTime={currentTime}\n           showCompleted={showCompleted}\n           setShowCompleted={setShowCompleted}\n           freeTime={freeTime}\n-          unSc\n+          unSchecduledTasks={unscheduledTasks}\n         />\n \n       </div>\n \n"
                },
                {
                    "date": 1762693810078,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n   const [currentTime, setCurrentTime] = useState(new Date());\n   const [completedTasks, setCompletedTasks] = useState(new Set());\n   const [showCompleted, setShowCompleted] = useState(false);\n   const [freeTime, setFreeTime] = useState(null);\n-  const [unscheduledTasks, setUnscheduledTasks] = useState([]);\n+  const [uncheduledTasks, setUnscheduledTasks] = useState([]);\n \n \n   // Effect for loading API key from local storage\n   useEffect(() => {\n"
                },
                {
                    "date": 1762693819725,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n   const [currentTime, setCurrentTime] = useState(new Date());\n   const [completedTasks, setCompletedTasks] = useState(new Set());\n   const [showCompleted, setShowCompleted] = useState(false);\n   const [freeTime, setFreeTime] = useState(null);\n-  const [uncheduledTasks, setUnscheduledTasks] = useState([]);\n+  const [unScheduledTasks, setUncheduledTasks] = useState([]);\n \n \n   // Effect for loading API key from local storage\n   useEffect(() => {\n"
                },
                {
                    "date": 1762693849072,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n   const [currentTime, setCurrentTime] = useState(new Date());\n   const [completedTasks, setCompletedTasks] = useState(new Set());\n   const [showCompleted, setShowCompleted] = useState(false);\n   const [freeTime, setFreeTime] = useState(null);\n-  const [unScheduledTasks, setUncheduledTasks] = useState([]);\n+  const [unScheduledTasks, setUnScheduledTasks] = useState([]);\n \n \n   // Effect for loading API key from local storage\n   useEffect(() => {\n@@ -151,9 +151,9 @@\n           currentTime={currentTime}\n           showCompleted={showCompleted}\n           setShowCompleted={setShowCompleted}\n           freeTime={freeTime}\n-          unSchecduledTasks={unscheduledTasks}\n+          unScheduledTasks={unScheduledTasks}\n         />\n \n       </div>\n \n"
                },
                {
                    "date": 1762694978420,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -121,9 +121,9 @@\n   };\n \n   return (\n     <div className=\"bg-gray-100 min-h-screen\">\n-      <div className=\"container mx-auto p-4 md:p-8 max-w-5xl\">\n+      <div className=\"container mx-auto p-4 md:p-8 max-w-xl\">\n         \n         <Header />\n \n         <div className=\"text-right mb-4\">\n"
                },
                {
                    "date": 1762696502316,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,49 +1,45 @@\n import { useState, useEffect } from 'react';\n-import Header from './components/Header';\n-import SettingsModal from './components/SettingsModal';\n-import TaskForm from './components/TaskForm';\n-import Schedule from './components/Schedule';\n+import Header from './components/Header.jsx';\n+import SettingsModal from './components/SettingsModal.jsx';\n+import TaskForm from './components/TaskForm.jsx';\n+import Schedule from './components/Schedule.jsx';\n+import Sidebar from './components/Sidebar.jsx'; // 1. Import the new Sidebar\n import { getAISchedule } from './services/geminiService.js';\n import { parseTime } from './utils/timeUtils.js';\n \n function App() {\n-  // State\n+  // --- All your existing state hooks ---\n   const [apiKey, setApiKey] = useState('');\n   const [taskInput, setTaskInput] = useState('');\n   const [generatedSchedule, setGeneratedSchedule] = useState([]);\n   const [isLoading, setIsLoading] = useState(false);\n   const [error, setError] = useState(null);\n   const [showModal, setShowModal] = useState(false);\n-  \n-  // New State for features\n   const [currentTime, setCurrentTime] = useState(new Date());\n   const [completedTasks, setCompletedTasks] = useState(new Set());\n   const [showCompleted, setShowCompleted] = useState(false);\n   const [freeTime, setFreeTime] = useState(null);\n   const [unScheduledTasks, setUnScheduledTasks] = useState([]);\n \n-\n-  // Effect for loading API key from local storage\n+  // --- All your existing effects (loading key, clock) ---\n   useEffect(() => {\n     const savedKey = localStorage.getItem('gemini_api_key');\n     if (savedKey) {\n       setApiKey(savedKey);\n     } else {\n-      setShowModal(true); // Force modal open if no key\n+      setShowModal(true);\n     }\n   }, []);\n \n-  // Effect for the real-time clock\n   useEffect(() => {\n     const timerId = setInterval(() => {\n       setCurrentTime(new Date());\n-    }, 1000); // Update every second\n-\n-    return () => clearInterval(timerId); // Cleanup\n+    }, 1000);\n+    return () => clearInterval(timerId);\n   }, []);\n \n-  // Handlers\n+  // --- All your existing handler functions ---\n   const handleSaveApiKey = () => {\n     if (apiKey) {\n       localStorage.setItem('gemini_api_key', apiKey);\n       setShowModal(false);\n@@ -68,20 +64,16 @@\n     setError(null);\n     setGeneratedSchedule([]);\n     setFreeTime(null);\n     setUnScheduledTasks([]);\n+    setCompletedTasks(new Set()); // Reset progress on new schedule\n \n     try {\n-      // Pass the current time to the service\n       const { finalSchedule, couldNotSchedule } = await getAISchedule(taskInput, apiKey, currentTime);\n-      \n       setGeneratedSchedule(finalSchedule);\n       setUnScheduledTasks(couldNotSchedule || []);\n-      \n-      // Calculate free time after getting schedule\n       const totalFreeMinutes = calculateFreeTime(finalSchedule);\n       setFreeTime(totalFreeMinutes);\n-\n     } catch (err) {\n       console.error(err);\n       setError(err.message);\n     } finally {\n@@ -103,61 +95,68 @@\n \n   const calculateFreeTime = (schedule) => {\n     let totalMinutes = 0;\n     if (!schedule) return 0;\n-    \n     schedule.forEach(item => {\n       if (item.task.toLowerCase() === 'free time') {\n         try {\n           const startTime = parseTime(item.startTime);\n           const endTime = parseTime(item.endTime);\n           const durationMs = endTime.getTime() - startTime.getTime();\n           totalMinutes += durationMs / (1000 * 60);\n-        } catch(e) {\n-          console.error(\"Error parsing free time:\", item);\n-        }\n+        } catch (e) { console.error(\"Error parsing free time:\", item); }\n       }\n     });\n     return totalMinutes;\n   };\n \n+  // --- 2. Calculate progress data ---\n+  const totalTasks = generatedSchedule.filter(task => task.task.toLowerCase() !== 'free time').length;\n+  const completedCount = completedTasks.size;\n+\n+  // --- 3. Render the new layout ---\n   return (\n     <div className=\"bg-gray-100 min-h-screen\">\n-      <div className=\"container mx-auto p-4 md:p-8 max-w-xl\">\n+      \n+      {/* The new header, which gets the click handler */}\n+      <Header onSettingsClick={() => setShowModal(true)} />\n+\n+      {/* The main grid for the dashboard */}\n+      <main className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 p-4 md:p-8\">\n         \n-        <Header />\n+        {/* Main Content Column (2/3 width) */}\n+        <div className=\"lg:col-span-2 space-y-8\">\n+          <TaskForm \n+            taskInput={taskInput}\n+            setTaskInput={setTaskInput}\n+            onSubmit={handleGenerateSchedule}\n+            isLoading={isLoading}\n+          />\n+          <Schedule\n+            schedule={generatedSchedule}\n+            isLoading={isLoading}\n+            error={error}\n+            completedTasks={completedTasks}\n+            onToggleComplete={handleToggleComplete}\n+            currentTime={currentTime}\n+            showCompleted={showCompleted}\n+            setShowCompleted={setShowCompleted}\n+            freeTime={freeTime}\n+            unScheduledTasks={unScheduledTasks}\n+          />\n+        </div>\n \n-        <div className=\"text-right mb-4\">\n-          <button\n-            onClick={() => setShowModal(true)}\n-            className=\"bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg shadow\"\n-          >\n-            Settings\n-          </button>\n+        {/* Sidebar Column (1/3 width) */}\n+        <div className=\"lg:col-span-1 space-y-8\">\n+          <Sidebar \n+            totalTasks={totalTasks} \n+            completedCount={completedCount} \n+          />\n         </div>\n \n-        <TaskForm \n-          taskInput={taskInput}\n-          setTaskInput={setTaskInput}\n-          onSubmit={handleGenerateSchedule}\n-          isLoading={isLoading}\n-        />\n+      </main>\n \n-        <Schedule\n-          schedule={generatedSchedule}\n-          isLoading={isLoading}\n-          error={error}\n-          completedTasks={completedTasks}\n-          onToggleComplete={handleToggleComplete}\n-          currentTime={currentTime}\n-          showCompleted={showCompleted}\n-          setShowCompleted={setShowCompleted}\n-          freeTime={freeTime}\n-          unScheduledTasks={unScheduledTasks}\n-        />\n-\n-      </div>\n-\n+      {/* The modal is unchanged and stays at the end */}\n       <SettingsModal\n         show={showModal}\n         onClose={() => setShowModal(false)}\n         apiKey={apiKey}\n"
                },
                {
                    "date": 1762697109282,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,10 +2,11 @@\n import Header from './components/Header.jsx';\n import SettingsModal from './components/SettingsModal.jsx';\n import TaskForm from './components/TaskForm.jsx';\n import Schedule from './components/Schedule.jsx';\n-import Sidebar from './components/Sidebar.jsx'; // 1. Import the new Sidebar\n-import { getAISchedule } from './services/geminiService.js';\n+import Sidebar from './components/Sidebar.jsx';\n+// Import BOTH functions from the service\n+import { getAISchedule, getAITips } from './services/geminiService.js';\n import { parseTime } from './utils/timeUtils.js';\n \n function App() {\n   // --- All your existing state hooks ---\n@@ -19,9 +20,14 @@\n   const [completedTasks, setCompletedTasks] = useState(new Set());\n   const [showCompleted, setShowCompleted] = useState(false);\n   const [freeTime, setFreeTime] = useState(null);\n   const [unScheduledTasks, setUnScheduledTasks] = useState([]);\n+  \n+  // --- New state for AI Tips ---\n+  const [aiTips, setAiTips] = useState([]);\n+  const [isTipsLoading, setIsTipsLoading] = useState(false);\n \n+\n   // --- All your existing effects (loading key, clock) ---\n   useEffect(() => {\n     const savedKey = localStorage.getItem('gemini_api_key');\n     if (savedKey) {\n@@ -59,26 +65,38 @@\n       alert('Please enter some tasks.');\n       return;\n     }\n \n+    // Reset all states\n     setIsLoading(true);\n+    setIsTipsLoading(true); // Start loading tips too\n     setError(null);\n     setGeneratedSchedule([]);\n     setFreeTime(null);\n     setUnScheduledTasks([]);\n-    setCompletedTasks(new Set()); // Reset progress on new schedule\n+    setCompletedTasks(new Set());\n+    setAiTips([]); // Clear old tips\n \n     try {\n+      // --- Get Schedule (main task) ---\n       const { finalSchedule, couldNotSchedule } = await getAISchedule(taskInput, apiKey, currentTime);\n       setGeneratedSchedule(finalSchedule);\n       setUnScheduledTasks(couldNotSchedule || []);\n       const totalFreeMinutes = calculateFreeTime(finalSchedule);\n       setFreeTime(totalFreeMinutes);\n+      \n+      // --- Get AI Tips (secondary task) ---\n+      // This runs *after* the schedule is successfully fetched\n+      const tips = await getAITips(taskInput, apiKey);\n+      setAiTips(tips);\n+\n     } catch (err) {\n       console.error(err);\n       setError(err.message);\n+      setAiTips([\"Could not load tips due to an error.\"]); // Show error in tips box\n     } finally {\n       setIsLoading(false);\n+      setIsTipsLoading(false); // Stop loading tips\n     }\n   };\n \n   const handleToggleComplete = (taskId) => {\n@@ -108,20 +126,18 @@\n     });\n     return totalMinutes;\n   };\n \n-  // --- 2. Calculate progress data ---\n+  // --- Calculate progress data (This logic is correct) ---\n   const totalTasks = generatedSchedule.filter(task => task.task.toLowerCase() !== 'free time').length;\n   const completedCount = completedTasks.size;\n \n-  // --- 3. Render the new layout ---\n+  // --- Render the new layout ---\n   return (\n     <div className=\"bg-gray-100 min-h-screen\">\n       \n-      {/* The new header, which gets the click handler */}\n       <Header onSettingsClick={() => setShowModal(true)} />\n \n-      {/* The main grid for the dashboard */}\n       <main className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 p-4 md:p-8\">\n         \n         {/* Main Content Column (2/3 width) */}\n         <div className=\"lg:col-span-2 space-y-8\">\n@@ -149,14 +165,16 @@\n         <div className=\"lg:col-span-1 space-y-8\">\n           <Sidebar \n             totalTasks={totalTasks} \n             completedCount={completedCount} \n+            // Pass the new tips state\n+            aiTips={aiTips}\n+            isTipsLoading={isTipsLoading}\n           />\n         </div>\n \n       </main>\n \n-      {/* The modal is unchanged and stays at the end */}\n       <SettingsModal\n         show={showModal}\n         onClose={() => setShowModal(false)}\n         apiKey={apiKey}\n"
                },
                {
                    "date": 1762697723005,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,14 +3,15 @@\n import SettingsModal from './components/SettingsModal.jsx';\n import TaskForm from './components/TaskForm.jsx';\n import Schedule from './components/Schedule.jsx';\n import Sidebar from './components/Sidebar.jsx';\n-// Import BOTH functions from the service\n-import { getAISchedule, getAITips } from './services/geminiService.js';\n+// We only need the ONE service function here now\n+import { getAISchedule } in './services/geminiService.js';\n import { parseTime } from './utils/timeUtils.js';\n \n function App() {\n   // --- All your existing state hooks ---\n+  // (Notice aiTips and isTipsLoading are GONE)\n   const [apiKey, setApiKey] = useState('');\n   const [taskInput, setTaskInput] = useState('');\n   const [generatedSchedule, setGeneratedSchedule] = useState([]);\n   const [isLoading, setIsLoading] = useState(false);\n@@ -21,13 +22,8 @@\n   const [showCompleted, setShowCompleted] = useState(false);\n   const [freeTime, setFreeTime] = useState(null);\n   const [unScheduledTasks, setUnScheduledTasks] = useState([]);\n   \n-  // --- New state for AI Tips ---\n-  const [aiTips, setAiTips] = useState([]);\n-  const [isTipsLoading, setIsTipsLoading] = useState(false);\n-\n-\n   // --- All your existing effects (loading key, clock) ---\n   useEffect(() => {\n     const savedKey = localStorage.getItem('gemini_api_key');\n     if (savedKey) {\n@@ -54,8 +50,9 @@\n       alert('Please enter a valid API Key.');\n     }\n   };\n \n+  // This function is now simpler\n   const handleGenerateSchedule = async () => {\n     if (!apiKey) {\n       alert('Please set your Gemini API Key in Settings first.');\n       setShowModal(true);\n@@ -67,15 +64,13 @@\n     }\n \n     // Reset all states\n     setIsLoading(true);\n-    setIsTipsLoading(true); // Start loading tips too\n     setError(null);\n     setGeneratedSchedule([]);\n     setFreeTime(null);\n     setUnScheduledTasks([]);\n     setCompletedTasks(new Set());\n-    setAiTips([]); // Clear old tips\n \n     try {\n       // --- Get Schedule (main task) ---\n       const { finalSchedule, couldNotSchedule } = await getAISchedule(taskInput, apiKey, currentTime);\n@@ -83,20 +78,15 @@\n       setUnScheduledTasks(couldNotSchedule || []);\n       const totalFreeMinutes = calculateFreeTime(finalSchedule);\n       setFreeTime(totalFreeMinutes);\n       \n-      // --- Get AI Tips (secondary task) ---\n-      // This runs *after* the schedule is successfully fetched\n-      const tips = await getAITips(taskInput, apiKey);\n-      setAiTips(tips);\n+      // --- NO LONGER GETS TIPS HERE ---\n \n     } catch (err) {\n       console.error(err);\n       setError(err.message);\n-      setAiTips([\"Could not load tips due to an error.\"]); // Show error in tips box\n     } finally {\n       setIsLoading(false);\n-      setIsTipsLoading(false); // Stop loading tips\n     }\n   };\n \n   const handleToggleComplete = (taskId) => {\n@@ -165,11 +155,11 @@\n         <div className=\"lg:col-span-1 space-y-8\">\n           <Sidebar \n             totalTasks={totalTasks} \n             completedCount={completedCount} \n-            // Pass the new tips state\n-            aiTips={aiTips}\n-            isTipsLoading={isTipsLoading}\n+            // Pass the schedule and key down\n+            schedule={generatedSchedule}\n+            apiKey={apiKey}\n           />\n         </div>\n \n       </main>\n"
                },
                {
                    "date": 1762697825646,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n import TaskForm from './components/TaskForm.jsx';\n import Schedule from './components/Schedule.jsx';\n import Sidebar from './components/Sidebar.jsx';\n // We only need the ONE service function here now\n-import { getAISchedule } in './services/geminiService.js';\n+import { getAISchedule } i './services/geminiService.js';\n import { parseTime } from './utils/timeUtils.js';\n \n function App() {\n   // --- All your existing state hooks ---\n"
                },
                {
                    "date": 1762697831239,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n import TaskForm from './components/TaskForm.jsx';\n import Schedule from './components/Schedule.jsx';\n import Sidebar from './components/Sidebar.jsx';\n // We only need the ONE service function here now\n-import { getAISchedule } i './services/geminiService.js';\n+import { getAISchedule } from './services/geminiService.js';\n import { parseTime } from './utils/timeUtils.js';\n \n function App() {\n   // --- All your existing state hooks ---\n"
                },
                {
                    "date": 1762698518051,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,15 +3,13 @@\n import SettingsModal from './components/SettingsModal.jsx';\n import TaskForm from './components/TaskForm.jsx';\n import Schedule from './components/Schedule.jsx';\n import Sidebar from './components/Sidebar.jsx';\n-// We only need the ONE service function here now\n import { getAISchedule } from './services/geminiService.js';\n import { parseTime } from './utils/timeUtils.js';\n \n function App() {\n   // --- All your existing state hooks ---\n-  // (Notice aiTips and isTipsLoading are GONE)\n   const [apiKey, setApiKey] = useState('');\n   const [taskInput, setTaskInput] = useState('');\n   const [generatedSchedule, setGeneratedSchedule] = useState([]);\n   const [isLoading, setIsLoading] = useState(false);\n@@ -50,9 +48,8 @@\n       alert('Please enter a valid API Key.');\n     }\n   };\n \n-  // This function is now simpler\n   const handleGenerateSchedule = async () => {\n     if (!apiKey) {\n       alert('Please set your Gemini API Key in Settings first.');\n       setShowModal(true);\n@@ -71,18 +68,14 @@\n     setUnScheduledTasks([]);\n     setCompletedTasks(new Set());\n \n     try {\n-      // --- Get Schedule (main task) ---\n       const { finalSchedule, couldNotSchedule } = await getAISchedule(taskInput, apiKey, currentTime);\n       setGeneratedSchedule(finalSchedule);\n       setUnScheduledTasks(couldNotSchedule || []);\n       const totalFreeMinutes = calculateFreeTime(finalSchedule);\n       setFreeTime(totalFreeMinutes);\n-      \n-      // --- NO LONGER GETS TIPS HERE ---\n-\n-    } catch (err) {\n+    } catch (err)\n       console.error(err);\n       setError(err.message);\n     } finally {\n       setIsLoading(false);\n@@ -116,9 +109,8 @@\n     });\n     return totalMinutes;\n   };\n \n-  // --- Calculate progress data (This logic is correct) ---\n   const totalTasks = generatedSchedule.filter(task => task.task.toLowerCase() !== 'free time').length;\n   const completedCount = completedTasks.size;\n \n   // --- Render the new layout ---\n@@ -128,9 +120,9 @@\n       <Header onSettingsClick={() => setShowModal(true)} />\n \n       <main className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 p-4 md:p-8\">\n         \n-        {/* Main Content Column (2/3 width) */}\n+        {/* Main Content Column (This will scroll) */}\n         <div className=\"lg:col-span-2 space-y-8\">\n           <TaskForm \n             taskInput={taskInput}\n             setTaskInput={setTaskInput}\n@@ -150,17 +142,19 @@\n             unScheduledTasks={unScheduledTasks}\n           />\n         </div>\n \n-        {/* Sidebar Column (1/3 width) */}\n-        <div className=\"lg:col-span-1 space-y-8\">\n-          <Sidebar \n-            totalTasks={totalTasks} \n-            completedCount={completedCount} \n-            // Pass the schedule and key down\n-            schedule={generatedSchedule}\n-            apiKey={apiKey}\n-          />\n+        {/* Sidebar Column (This will be sticky) */}\n+        <div className=\"lg:col-span-1\">\n+          {/* This new div makes the content sticky on large screens */}\n+          <div className=\"lg:sticky lg:top-8 space-y-8\">\n+            <Sidebar \n+              totalTasks={totalTasks} \n+              completedCount={completedCount} \n+              schedule={generatedSchedule}\n+              apiKey={apiKey}\n+            />\n+          </div>\n         </div>\n \n       </main>\n \n"
                },
                {
                    "date": 1762698532582,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,13 +3,15 @@\n import SettingsModal from './components/SettingsModal.jsx';\n import TaskForm from './components/TaskForm.jsx';\n import Schedule from './components/Schedule.jsx';\n import Sidebar from './components/Sidebar.jsx';\n+// We only need the ONE service function here now\n import { getAISchedule } from './services/geminiService.js';\n import { parseTime } from './utils/timeUtils.js';\n \n function App() {\n   // --- All your existing state hooks ---\n+  // (Notice aiTips and isTipsLoading are GONE)\n   const [apiKey, setApiKey] = useState('');\n   const [taskInput, setTaskInput] = useState('');\n   const [generatedSchedule, setGeneratedSchedule] = useState([]);\n   const [isLoading, setIsLoading] = useState(false);\n@@ -48,8 +50,9 @@\n       alert('Please enter a valid API Key.');\n     }\n   };\n \n+  // This function is now simpler\n   const handleGenerateSchedule = async () => {\n     if (!apiKey) {\n       alert('Please set your Gemini API Key in Settings first.');\n       setShowModal(true);\n@@ -68,14 +71,18 @@\n     setUnScheduledTasks([]);\n     setCompletedTasks(new Set());\n \n     try {\n+      // --- Get Schedule (main task) ---\n       const { finalSchedule, couldNotSchedule } = await getAISchedule(taskInput, apiKey, currentTime);\n       setGeneratedSchedule(finalSchedule);\n       setUnScheduledTasks(couldNotSchedule || []);\n       const totalFreeMinutes = calculateFreeTime(finalSchedule);\n       setFreeTime(totalFreeMinutes);\n-    } catch (err)\n+      \n+      // --- NO LONGER GETS TIPS HERE ---\n+\n+    } catch (err) {\n       console.error(err);\n       setError(err.message);\n     } finally {\n       setIsLoading(false);\n@@ -109,8 +116,9 @@\n     });\n     return totalMinutes;\n   };\n \n+  // --- Calculate progress data (This logic is correct) ---\n   const totalTasks = generatedSchedule.filter(task => task.task.toLowerCase() !== 'free time').length;\n   const completedCount = completedTasks.size;\n \n   // --- Render the new layout ---\n@@ -120,9 +128,9 @@\n       <Header onSettingsClick={() => setShowModal(true)} />\n \n       <main className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 p-4 md:p-8\">\n         \n-        {/* Main Content Column (This will scroll) */}\n+        {/* Main Content Column (2/3 width) */}\n         <div className=\"lg:col-span-2 space-y-8\">\n           <TaskForm \n             taskInput={taskInput}\n             setTaskInput={setTaskInput}\n@@ -142,19 +150,17 @@\n             unScheduledTasks={unScheduledTasks}\n           />\n         </div>\n \n-        {/* Sidebar Column (This will be sticky) */}\n-        <div className=\"lg:col-span-1\">\n-          {/* This new div makes the content sticky on large screens */}\n-          <div className=\"lg:sticky lg:top-8 space-y-8\">\n-            <Sidebar \n-              totalTasks={totalTasks} \n-              completedCount={completedCount} \n-              schedule={generatedSchedule}\n-              apiKey={apiKey}\n-            />\n-          </div>\n+        {/* Sidebar Column (1/3 width) */}\n+        <div className=\"lg:col-span-1 space-y-8\">\n+          <Sidebar \n+            totalTasks={totalTasks} \n+            completedCount={completedCount} \n+            // Pass the schedule and key down\n+            schedule={generatedSchedule}\n+            apiKey={apiKey}\n+          />\n         </div>\n \n       </main>\n \n"
                },
                {
                    "date": 1762698620503,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -151,8 +151,9 @@\n           />\n         </div>\n \n         {/* Sidebar Column (1/3 width) */}\n+        \n         <div className=\"lg:col-span-1 space-y-8\">\n           <Sidebar \n             totalTasks={totalTasks} \n             completedCount={completedCount} \n"
                },
                {
                    "date": 1762698629196,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -151,9 +151,9 @@\n           />\n         </div>\n \n         {/* Sidebar Column (1/3 width) */}\n-        \n+        <div\n         <div className=\"lg:col-span-1 space-y-8\">\n           <Sidebar \n             totalTasks={totalTasks} \n             completedCount={completedCount} \n"
                },
                {
                    "date": 1762698634372,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -151,9 +151,9 @@\n           />\n         </div>\n \n         {/* Sidebar Column (1/3 width) */}\n-        <div\n+        <div className=\"lg:col-span-1 space-\">\n         <div className=\"lg:col-span-1 space-y-8\">\n           <Sidebar \n             totalTasks={totalTasks} \n             completedCount={completedCount} \n"
                },
                {
                    "date": 1762698641528,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -151,9 +151,9 @@\n           />\n         </div>\n \n         {/* Sidebar Column (1/3 width) */}\n-        <div className=\"lg:col-span-1 space-\">\n+        <div className=\"lg:col-span-1\"></div>\n         <div className=\"lg:col-span-1 space-y-8\">\n           <Sidebar \n             totalTasks={totalTasks} \n             completedCount={completedCount} \n"
                },
                {
                    "date": 1762698646930,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -151,9 +151,9 @@\n           />\n         </div>\n \n         {/* Sidebar Column (1/3 width) */}\n-        <div className=\"lg:col-span-1\"></div>\n+        <div className=\"lg:col-span-1\">\n         <div className=\"lg:col-span-1 space-y-8\">\n           <Sidebar \n             totalTasks={totalTasks} \n             completedCount={completedCount} \n"
                },
                {
                    "date": 1762698670680,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -152,17 +152,18 @@\n         </div>\n \n         {/* Sidebar Column (1/3 width) */}\n         <div className=\"lg:col-span-1\">\n-        <div className=\"lg:col-span-1 space-y-8\">\n+        <div className=\"lg:col-span- space-y-8\">\n           <Sidebar \n             totalTasks={totalTasks} \n             completedCount={completedCount} \n             // Pass the schedule and key down\n             schedule={generatedSchedule}\n             apiKey={apiKey}\n           />\n         </div>\n+        </div>\n \n       </main>\n \n       <SettingsModal\n"
                },
                {
                    "date": 1762698677449,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -152,9 +152,9 @@\n         </div>\n \n         {/* Sidebar Column (1/3 width) */}\n         <div className=\"lg:col-span-1\">\n-        <div className=\"lg:col-span- space-y-8\">\n+        <div className=\"lg:stick space-y-8\">\n           <Sidebar \n             totalTasks={totalTasks} \n             completedCount={completedCount} \n             // Pass the schedule and key down\n"
                },
                {
                    "date": 1762698685050,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -152,9 +152,9 @@\n         </div>\n \n         {/* Sidebar Column (1/3 width) */}\n         <div className=\"lg:col-span-1\">\n-        <div className=\"lg:stick space-y-8\">\n+        <div className=\"lg:sticky lg space-y-8\">\n           <Sidebar \n             totalTasks={totalTasks} \n             completedCount={completedCount} \n             // Pass the schedule and key down\n"
                },
                {
                    "date": 1762698950933,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -152,9 +152,9 @@\n         </div>\n \n         {/* Sidebar Column (1/3 width) */}\n         <div className=\"lg:col-span-1\">\n-        <div className=\"lg:sticky lg space-y-8\">\n+        <div className=\"lg:sticky lg:top- space-y-8\">\n           <Sidebar \n             totalTasks={totalTasks} \n             completedCount={completedCount} \n             // Pass the schedule and key down\n"
                },
                {
                    "date": 1762698975048,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -152,9 +152,9 @@\n         </div>\n \n         {/* Sidebar Column (1/3 width) */}\n         <div className=\"lg:col-span-1\">\n-        <div className=\"lg:sticky lg:top- space-y-8\">\n+        <div className=\"lg:sticky lg:top-1 space-y-8\">\n           <Sidebar \n             totalTasks={totalTasks} \n             completedCount={completedCount} \n             // Pass the schedule and key down\n"
                },
                {
                    "date": 1762698981907,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -152,9 +152,9 @@\n         </div>\n \n         {/* Sidebar Column (1/3 width) */}\n         <div className=\"lg:col-span-1\">\n-        <div className=\"lg:sticky lg:top-1 space-y-8\">\n+        <div className=\"lg:sticky lg:top- space-y-8\">\n           <Sidebar \n             totalTasks={totalTasks} \n             completedCount={completedCount} \n             // Pass the schedule and key down\n"
                },
                {
                    "date": 1762699110308,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -152,9 +152,9 @@\n         </div>\n \n         {/* Sidebar Column (1/3 width) */}\n         <div className=\"lg:col-span-1\">\n-        <div className=\"lg:sticky lg:top- space-y-8\">\n+        <div sclassName=\"lg:sticky lg:top-8 space-y-8\">\n           <Sidebar \n             totalTasks={totalTasks} \n             completedCount={completedCount} \n             // Pass the schedule and key down\n"
                },
                {
                    "date": 1762699117146,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -152,9 +152,9 @@\n         </div>\n \n         {/* Sidebar Column (1/3 width) */}\n         <div className=\"lg:col-span-1\">\n-        <div sclassName=\"lg:sticky lg:top-8 space-y-8\">\n+        <div style={{ position: 'sticky', top: '32px' }} className=\"lg:top-8 space-y-8\">\n           <Sidebar \n             totalTasks={totalTasks} \n             completedCount={completedCount} \n             // Pass the schedule and key down\n"
                },
                {
                    "date": 1762699170580,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -152,9 +152,9 @@\n         </div>\n \n         {/* Sidebar Column (1/3 width) */}\n         <div className=\"lg:col-span-1\">\n-        <div style={{ position: 'sticky', top: '32px' }} className=\"lg:top-8 space-y-8\">\n+        <div style={{ position: 'sticky', top: '32px' }} className=\"space-y-8\">\n           <Sidebar \n             totalTasks={totalTasks} \n             completedCount={completedCount} \n             // Pass the schedule and key down\n"
                },
                {
                    "date": 1762699427922,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,15 +3,13 @@\n import SettingsModal from './components/SettingsModal.jsx';\n import TaskForm from './components/TaskForm.jsx';\n import Schedule from './components/Schedule.jsx';\n import Sidebar from './components/Sidebar.jsx';\n-// We only need the ONE service function here now\n import { getAISchedule } from './services/geminiService.js';\n import { parseTime } from './utils/timeUtils.js';\n \n function App() {\n   // --- All your existing state hooks ---\n-  // (Notice aiTips and isTipsLoading are GONE)\n   const [apiKey, setApiKey] = useState('');\n   const [taskInput, setTaskInput] = useState('');\n   const [generatedSchedule, setGeneratedSchedule] = useState([]);\n   const [isLoading, setIsLoading] = useState(false);\n@@ -50,9 +48,8 @@\n       alert('Please enter a valid API Key.');\n     }\n   };\n \n-  // This function is now simpler\n   const handleGenerateSchedule = async () => {\n     if (!apiKey) {\n       alert('Please set your Gemini API Key in Settings first.');\n       setShowModal(true);\n@@ -71,17 +68,13 @@\n     setUnScheduledTasks([]);\n     setCompletedTasks(new Set());\n \n     try {\n-      // --- Get Schedule (main task) ---\n       const { finalSchedule, couldNotSchedule } = await getAISchedule(taskInput, apiKey, currentTime);\n       setGeneratedSchedule(finalSchedule);\n       setUnScheduledTasks(couldNotSchedule || []);\n       const totalFreeMinutes = calculateFreeTime(finalSchedule);\n       setFreeTime(totalFreeMinutes);\n-      \n-      // --- NO LONGER GETS TIPS HERE ---\n-\n     } catch (err) {\n       console.error(err);\n       setError(err.message);\n     } finally {\n@@ -116,21 +109,23 @@\n     });\n     return totalMinutes;\n   };\n \n-  // --- Calculate progress data (This logic is correct) ---\n   const totalTasks = generatedSchedule.filter(task => task.task.toLowerCase() !== 'free time').length;\n   const completedCount = completedTasks.size;\n \n-  // --- Render the new layout ---\n+  // --- Render the layout ---\n   return (\n+    // We add h-screen and overflow-y-scroll to the main wrapper\n+    // to make the *page* scroll, not the body.\n     <div className=\"bg-gray-100 min-h-screen\">\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n+      {/* The main grid has its top padding from p-8 */}\n       <main className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 p-4 md:p-8\">\n         \n-        {/* Main Content Column (2/3 width) */}\n+        {/* Main Content Column (This will scroll) */}\n         <div className=\"lg:col-span-2 space-y-8\">\n           <TaskForm \n             taskInput={taskInput}\n             setTaskInput={setTaskInput}\n@@ -150,20 +145,22 @@\n             unScheduledTasks={unScheduledTasks}\n           />\n         </div>\n \n-        {/* Sidebar Column (1/3 width) */}\n+        {/* Sidebar Column (This will be sticky) */}\n         <div className=\"lg:col-span-1\">\n-        <div style={{ position: 'sticky', top: '32px' }} className=\"space-y-8\">\n-          <Sidebar \n-            totalTasks={totalTasks} \n-            completedCount={completedCount} \n-            // Pass the schedule and key down\n-            schedule={generatedSchedule}\n-            apiKey={apiKey}\n-          />\n+          {/* We changed lg:top-8 to lg:top-24.\n+            h-16 (4rem) from Header + top-8 (2rem) from main padding = 6rem (top-24)\n+          */}\n+          <div className=\"lg:sticky lg:top-24 space-y-8\">\n+            <Sidebar \n+              totalTasks={totalTasks} \n+              completedCount={completedCount} \n+              schedule={generatedSchedule}\n+              apiKey={apiKey}\n+            />\n+          </div>\n         </div>\n-        </div>\n \n       </main>\n \n       <SettingsModal\n"
                },
                {
                    "date": 1762700591906,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,9 +116,9 @@\n   // --- Render the layout ---\n   return (\n     // We add h-screen and overflow-y-scroll to the main wrapper\n     // to make the *page* scroll, not the body.\n-    <div className=\"bg-gray-100 min-h-screen\">\n+    <div className=\"bg-gray-100 mi-h-screen\">\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n       {/* The main grid has its top padding from p-8 */}\n"
                },
                {
                    "date": 1762700600539,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -111,14 +111,14 @@\n   };\n \n   const totalTasks = generatedSchedule.filter(task => task.task.toLowerCase() !== 'free time').length;\n   const completedCount = completedTasks.size;\n-\n+  \n   // --- Render the layout ---\n   return (\n     // We add h-screen and overflow-y-scroll to the main wrapper\n     // to make the *page* scroll, not the body.\n-    <div className=\"bg-gray-100 mi-h-screen\">\n+    <div className=\"bg-gray-100 max-h-screen\">\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n       {/* The main grid has its top padding from p-8 */}\n"
                },
                {
                    "date": 1762700605966,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -111,14 +111,14 @@\n   };\n \n   const totalTasks = generatedSchedule.filter(task => task.task.toLowerCase() !== 'free time').length;\n   const completedCount = completedTasks.size;\n-  \n+\n   // --- Render the layout ---\n   return (\n     // We add h-screen and overflow-y-scroll to the main wrapper\n     // to make the *page* scroll, not the body.\n-    <div className=\"bg-gray-100 max-h-screen\">\n+    <div className=\"bg-gray-100 max-h-screen \">\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n       {/* The main grid has its top padding from p-8 */}\n"
                },
                {
                    "date": 1762700617188,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,9 +116,9 @@\n   // --- Render the layout ---\n   return (\n     // We add h-screen and overflow-y-scroll to the main wrapper\n     // to make the *page* scroll, not the body.\n-    <div className=\"bg-gray-100 max-h-screen \">\n+    <div className=\"bg-gray-100 max-h-screen overflow-y-scrol\">\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n       {/* The main grid has its top padding from p-8 */}\n"
                },
                {
                    "date": 1762700624176,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,9 +116,9 @@\n   // --- Render the layout ---\n   return (\n     // We add h-screen and overflow-y-scroll to the main wrapper\n     // to make the *page* scroll, not the body.\n-    <div className=\"bg-gray-100 max-h-screen overflow-y-scrol\">\n+    <div className=\"bg-gray-100 max-h-scree\">\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n       {/* The main grid has its top padding from p-8 */}\n"
                },
                {
                    "date": 1762700640701,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,9 +116,9 @@\n   // --- Render the layout ---\n   return (\n     // We add h-screen and overflow-y-scroll to the main wrapper\n     // to make the *page* scroll, not the body.\n-    <div className=\"bg-gray-100 max-h-scree\">\n+    <div className=\"bg-gray-10\">\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n       {/* The main grid has its top padding from p-8 */}\n"
                },
                {
                    "date": 1762700662992,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,9 +116,10 @@\n   // --- Render the layout ---\n   return (\n     // We add h-screen and overflow-y-scroll to the main wrapper\n     // to make the *page* scroll, not the body.\n-    <div className=\"bg-gray-10\">\n+    \n+    <div className=\"min-h-screen bg-gray-100 overflow-y-scroll\">\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n       {/* The main grid has its top padding from p-8 */}\n"
                },
                {
                    "date": 1762700668275,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,9 +116,9 @@\n   // --- Render the layout ---\n   return (\n     // We add h-screen and overflow-y-scroll to the main wrapper\n     // to make the *page* scroll, not the body.\n-    \n+    //want the s\n     <div className=\"min-h-screen bg-gray-100 overflow-y-scroll\">\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n"
                },
                {
                    "date": 1762700674294,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,9 +116,9 @@\n   // --- Render the layout ---\n   return (\n     // We add h-screen and overflow-y-scroll to the main wrapper\n     // to make the *page* scroll, not the body.\n-    //want the s\n+    //want the screent to ac\n     <div className=\"min-h-screen bg-gray-100 overflow-y-scroll\">\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n"
                },
                {
                    "date": 1762700679437,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,9 +116,9 @@\n   // --- Render the layout ---\n   return (\n     // We add h-screen and overflow-y-scroll to the main wrapper\n     // to make the *page* scroll, not the body.\n-    //want the screent to ac\n+    //want the screent to occu\n     <div className=\"min-h-screen bg-gray-100 overflow-y-scroll\">\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n"
                },
                {
                    "date": 1762700685099,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,9 +116,9 @@\n   // --- Render the layout ---\n   return (\n     // We add h-screen and overflow-y-scroll to the main wrapper\n     // to make the *page* scroll, not the body.\n-    //want the screent to occu\n+    //want the screent to occupy the full\n     <div className=\"min-h-screen bg-gray-100 overflow-y-scroll\">\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n"
                },
                {
                    "date": 1762700690820,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,9 +116,9 @@\n   // --- Render the layout ---\n   return (\n     // We add h-screen and overflow-y-scroll to the main wrapper\n     // to make the *page* scroll, not the body.\n-    //want the screent to occupy the full\n+    //want the screent to occupy the full width\n     <div className=\"min-h-screen bg-gray-100 overflow-y-scroll\">\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n"
                },
                {
                    "date": 1762700698782,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,10 +116,10 @@\n   // --- Render the layout ---\n   return (\n     // We add h-screen and overflow-y-scroll to the main wrapper\n     // to make the *page* scroll, not the body.\n-    //want the screent to occupy the full width\n-    <div className=\"min-h-screen bg-gray-100 overflow-y-scroll\">\n+    //want the screent to occupy the full width and height of the viewport\n+    <div className=\"m\">\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n       {/* The main grid has its top padding from p-8 */}\n"
                },
                {
                    "date": 1762700711027,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -117,9 +117,9 @@\n   return (\n     // We add h-screen and overflow-y-scroll to the main wrapper\n     // to make the *page* scroll, not the body.\n     //want the screent to occupy the full width and height of the viewport\n-    <div className=\"m\">\n+    <div className=\"min-h-screen bg-gray-100 overflow-y-scroll\">\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n       {/* The main grid has its top padding from p-8 */}\n"
                },
                {
                    "date": 1762700767016,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,9 +122,9 @@\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n       {/* The main grid has its top padding from p-8 */}\n-      <main className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 p-4 md:p-8\">\n+      <main className=\"grid grid-cols-1 lg:grid-cols-3 gap- p-4 md:p-8\">\n         \n         {/* Main Content Column (This will scroll) */}\n         <div className=\"lg:col-span-2 space-y-8\">\n           <TaskForm \n"
                },
                {
                    "date": 1762700773849,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,9 +122,9 @@\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n       {/* The main grid has its top padding from p-8 */}\n-      <main className=\"grid grid-cols-1 lg:grid-cols-3 gap- p-4 md:p-8\">\n+      <main className=\"grid grid-cols-1 lg:grid-cols-3 p-4 md:p-8\">\n         \n         {/* Main Content Column (This will scroll) */}\n         <div className=\"lg:col-span-2 space-y-8\">\n           <TaskForm \n"
                },
                {
                    "date": 1762700780597,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,9 +122,9 @@\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n       {/* The main grid has its top padding from p-8 */}\n-      <main className=\"grid grid-cols-1 lg:grid-cols-3 p-4 md:p-8\">\n+      <main className=\"grid grid-cols-1 lg:grid-cols-3 gap- p-4 md:p-8\">\n         \n         {/* Main Content Column (This will scroll) */}\n         <div className=\"lg:col-span-2 space-y-8\">\n           <TaskForm \n"
                },
                {
                    "date": 1762700785752,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,9 +122,9 @@\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n       {/* The main grid has its top padding from p-8 */}\n-      <main className=\"grid grid-cols-1 lg:grid-cols-3 gap- p-4 md:p-8\">\n+      <main className=\"grid grid-cols-1 lg:grid-cols-3 gap-1 p-4 md:p-8\">\n         \n         {/* Main Content Column (This will scroll) */}\n         <div className=\"lg:col-span-2 space-y-8\">\n           <TaskForm \n"
                },
                {
                    "date": 1762701049348,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,9 +122,9 @@\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n       {/* The main grid has its top padding from p-8 */}\n-      <main className=\"grid grid-cols-1 lg:grid-cols-3 gap-1 p-4 md:p-8\">\n+      <main className=\"grid grid-cols-1 lg:grid-cols-3 gap-15 p-4 md:p-8\">\n         \n         {/* Main Content Column (This will scroll) */}\n         <div className=\"lg:col-span-2 space-y-8\">\n           <TaskForm \n"
                },
                {
                    "date": 1762701055327,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,15 +116,15 @@\n   // --- Render the layout ---\n   return (\n     // We add h-screen and overflow-y-scroll to the main wrapper\n     // to make the *page* scroll, not the body.\n-    //want the screent to occupy the full width and height of the viewport\n+    //want the screent to ac\n     <div className=\"min-h-screen bg-gray-100 overflow-y-scroll\">\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n       {/* The main grid has its top padding from p-8 */}\n-      <main className=\"grid grid-cols-1 lg:grid-cols-3 gap-15 p-4 md:p-8\">\n+      <main className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 p-4 md:p-8\">\n         \n         {/* Main Content Column (This will scroll) */}\n         <div className=\"lg:col-span-2 space-y-8\">\n           <TaskForm \n"
                },
                {
                    "date": 1762701062473,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,9 +116,9 @@\n   // --- Render the layout ---\n   return (\n     // We add h-screen and overflow-y-scroll to the main wrapper\n     // to make the *page* scroll, not the body.\n-    <div className=\"bg-gray-100 max-h-screen overflow-y-s\">\n+    <div className=\"bg-gray-100 max-h-screen overflow-y-scr\">\n       \n       <Header onSettingsClick={() => setShowModal(true)} />\n \n       {/* The main grid has its top padding from p-8 */}\n"
                },
                {
                    "date": 1762701067683,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -152,9 +152,9 @@\n         </div>\n \n         {/* Sidebar Column (1/3 width) */}\n         <div className=\"lg:col-span-1\">\n-        <div className=\"lg:sticky lg:top-1 space-y-8\">\n+        <div className=\"lg:sticky lg:top- space-y-8\">\n           <Sidebar \n             totalTasks={totalTasks} \n             completedCount={completedCount} \n             // Pass the schedule and key down\n"
                }
            ],
            "date": 1762690665698,
            "name": "Commit-0",
            "content": "// src/App.jsx\n\nimport { useState, useEffect } from 'react';\n\n// --- CONFIGURATION ---\n// We've updated this to the correct, stable model to fix the 404 error.\nconst GEMINI_API_URL_BASE = \"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro-latest:generateContent?key=\";\n\nconst FIXED_EVENTS = `\n    - Sleep (12am - 8am)\n    - Breakfast (8:30am - 9am)\n    - Lunch (1pm - 1:30pm)\n    - Dinner (7pm - 8pm)\n    - Shower (8am - 8:30am)\n`;\n\nfunction App() {\n  // --- STATE HOOKS ---\n  const [apiKey, setApiKey] = useState('');\n  const [taskInput, setTaskInput] = useState('');\n  const [generatedSchedule, setGeneratedSchedule] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [error, setError] = useState(null);\n\n  // --- EFFECTS ---\n  // Load API Key from localStorage on app start\n  useEffect(() => {\n    const savedKey = localStorage.getItem('gemini_api_key');\n    if (savedKey) {\n      setApiKey(savedKey);\n    } else {\n      setShowModal(true); // Force modal open if no key\n    }\n  }, []);\n\n  // --- FUNCTIONS ---\n\n  const handleSaveApiKey = () => {\n    if (apiKey) {\n      localStorage.setItem('gemini_api_key', apiKey);\n      setShowModal(false);\n      alert('API Key saved!');\n    } else {\n      alert('Please enter a valid API Key.');\n    }\n  };\n\n  const handleGenerateSchedule = async () => {\n    if (!apiKey) {\n      alert('Please set your Gemini API Key in Settings first.');\n      setShowModal(true);\n      return;\n    }\n    if (!taskInput) {\n      alert('Please enter some tasks.');\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n    setGeneratedSchedule([]); // Clear previous results\n\n    // Construct the prompt\n    const prompt = `\n        You are an expert executive assistant. Your job is to create a complete, minute-by-minute 24-hour schedule.\n\n        CONTEXT:\n        - Today is ${new Date().toLocaleDateString()}.\n        - The user has these 'fixed' life events. These can be shifted slightly (15-30 mins) if a high-priority task conflicts, but they MUST be included:\n        ${FIXED_EVENTS}\n        \n        USER TASK LIST:\n        ${taskInput}\n\n        YOUR TASK:\n        1.  Analyze the user's task list.\n        2.  For any task without a specific time or duration, you MUST intelligently assign a 'startTime', 'estimatedDurationMinutes', and a 'priority' (low, medium, high).\n        3.  Tasks with a set time (e.g., \"Dentist at 3 PM\") MUST be scheduled at that time.\n        4.  Build a 24-hour schedule (from 00:00 to 23:59).\n        5.  Fill all empty slots. If there are no user tasks, fill the time with 'Focus Work', 'Break', 'Admin Tasks', or 'Personal Time'.\n        6.  Merge the user's tasks with the fixed events.\n        7.  The final schedule must be a gap-free list of events for the entire day.\n        8.  You MUST reply with ONLY a valid JSON array. Do not write any other text, explanation, or markdown.\n\n        OUTPUT FORMAT (JSON Array only):\n        [\n            {\n                \"task\": \"Task Name\",\n                \"startTime\": \"HH:MM\",\n                \"endTime\": \"HH:MM\",\n                \"priority\": \"high\"\n            },\n            {\n                \"task\": \"Another Task\",\n                \"startTime\": \"HH:MM\",\n                \"endTime\": \"HH:MM\",\n                \"priority\": \"low\"\n            }\n        ]\n    `;\n\n    try {\n      const response = await fetch(GEMINI_API_URL_BASE + apiKey, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          contents: [{ parts: [{ text: prompt }] }]\n        })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(`API Error: ${response.status} ${response.statusText} - ${errorData.error.message}`);\n      }\n\n      const data = await response.json();\n      \n      let jsonString = data.candidates[0].content.parts[0].text;\n      jsonString = jsonString.replace(/```json/g, \"\").replace(/```/g, \"\").trim();\n\n      const schedule = JSON.parse(jsonString);\n\n      // Sort schedule by start time\n      schedule.sort((a, b) => a.startTime.localeCompare(b.startTime));\n      \n      setGeneratedSchedule(schedule);\n\n    } catch (err) {\n      console.error(err);\n      setError(err.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const exportToICS = () => {\n    if (generatedSchedule.length === 0) {\n      alert('First, generate a schedule to export.');\n      return;\n    }\n\n    let icsContent = [\n      \"BEGIN:VCALENDAR\",\n      \"VERSION:2.0\",\n      \"PRODID:-//GeminiScheduler//EN\",\n    ];\n\n    const today = new Date();\n    const y = today.getFullYear();\n    const m = String(today.getMonth() + 1).padStart(2, '0');\n    const d = String(today.getDate()).padStart(2, '0');\n\n    generatedSchedule.forEach(item => {\n      const [startH, startM] = item.startTime.split(':');\n      const [endH, endM] = item.endTime.split(':');\n      const dtstart = `${y}${m}${d}T${startH}${startM}00`;\n      const dtend = `${y}${m}${d}T${endH}${endM}00`;\n      const uid = `${dtstart}-${Math.random().toString(36).substr(2, 9)}@geminischeduler`;\n\n      icsContent.push(\n        \"BEGIN:VEVENT\",\n        `UID:${uid}`,\n        `DTSTAMP:${dtstart}`,\n        `DTSTART:${dtstart}`,\n        `DTEND:${dtend}`,\n        `SUMMARY:${item.task}`,\n        `DESCRIPTION:Priority: ${item.priority}`,\n        \"END:VEVENT\"\n      );\n    });\n\n    icsContent.push(\"END:VCALENDAR\");\n\n    const blob = new Blob([icsContent.join('\\r\\n')], { type: 'text/calendar;charset=utf-8' });\n    const link = document.createElement('a');\n    link.href = URL.createObjectURL(blob);\n    link.setAttribute('download', 'my-schedule.ics');\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  // --- JSX (HTML) ---\n  return (\n    <div className=\"bg-gray-100 min-h-screen\">\n      <div className=\"container mx-auto p-4 md:p-8 max-w-3xl\">\n\n        {/* Header */}\n        <header className=\"text-center my-8\">\n          <h1 className=\"text-4xl font-bold text-gray-800\">Gemini Smart Scheduler ðŸ¤–</h1>\n          <p className=\"text-gray-600\">Let AI organize your day.</p>\n        </header>\n\n        {/* API Key Settings Button */}\n        <div className=\"text-right mb-4\">\n          <button\n            onClick={() => setShowModal(true)}\n            className=\"bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg shadow\"\n          >\n            Settings\n          </button>\n        </div>\n\n        {/* Task Input */}\n        <div className=\"bg-white p-6 rounded-xl shadow-lg mb-8\">\n          <h2 className=\"text-2xl font-semibold mb-4 text-gray-700\">What's on your plate today?</h2>\n          <textarea\n            id=\"task-input\"\n            className=\"w-full h-32 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"e.g.&#10;- Write team report&#10;- Dentist at 3pm for 1 hour&#10;- Call mom&#10;- Project planning (high importance)\"\n            value={taskInput}\n            onChange={(e) => setTaskInput(e.target.value)}\n          />\n          <button\n            id=\"generate-button\"\n            className=\"mt-4 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition duration-300 ease-in-out disabled:bg-gray-400\"\n            onClick={handleGenerateSchedule}\n            disabled={isLoading}\n          >\n            {isLoading ? 'ðŸ§  Thinking...' : 'âœ¨ Generate Schedule'}\n          </button>\n        </div>\n\n        {/* Schedule Output */}\n        {(generatedSchedule.length > 0 || isLoading || error) && (\n          <div id=\"schedule-output\" className=\"bg-white p-6 rounded-xl shadow-lg\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <h2 className=\"text-2xl font-semibold text-gray-700\">Your Day, Organized</h2>\n              {generatedSchedule.length > 0 && (\n                <button\n                  id=\"export-button\"\n                  className=\"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg shadow\"\n                  onClick={exportToICS}\n                >\n                  Export to Calendar (.ics)\n                </button>\n              )}\n            </div>\n            \n            {/* Loading State */}\n            {isLoading && (\n              <div id=\"loading\" className=\"text-center p-8\">\n                <p className=\"text-gray-600 text-lg\">ðŸ§  Gemini is thinking... this may take a moment.</p>\n              </div>\n            )}\n\n            {/* Error Message */}\n            {error && (\n              <div className=\"text-center p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg\">\n                <p className=\"font-bold\">An Error Occurred</p>\n                <p className=\"text-sm\">{error}</p>\n              </div>\n            )}\n\n            {/* Timeline */}\n            <div id=\"timeline\" className=\"border-l-4 border-blue-500 pl-6 space-y-8\">\n              {generatedSchedule.map((item, index) => (\n                <TimelineItem key={index} item={item} index={index} />\n              ))}\n            </div>\n          </div>\n        )}\n\n      </div>\n\n      {/* API Key Modal */}\n      {showModal && (\n        <div id=\"api-key-modal\" className=\"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center\">\n          <div className=\"bg-white p-8 rounded-lg shadow-2xl w-full max-w-md\">\n            <h2 className=\"text-2xl font-semibold mb-4\">Settings</h2>\n            <p className=\"text-gray-600 mb-2\">Please enter your Google Gemini API Key.</p>\n            <input\n              type=\"password\"\n              id=\"api-key-input\"\n              className=\"w-full p-2 border border-gray-300 rounded-lg mb-4\"\n              placeholder=\"Enter your API Key\"\n              value={apiKey}\n              onChange={(e) => setApiKey(e.target.value)}\n            />\n            <button\n              id=\"save-api-key\"\n              className=\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg\"\n              onClick={handleSaveApiKey}\n            >\n              Save\n            </button>\n            <button\n              id=\"close-modal\"\n              className=\"ml-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg\"\n              onClick={() => setShowModal(false)}\n            >\n              Close\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n// --- Sub-Component for Timeline Item ---\nfunction TimelineItem({ item, index }) {\n  const priorityColors = {\n    high: 'border-red-500 bg-red-50',\n    medium: 'border-yellow-500 bg-yellow-50',\n    low: 'border-green-500 bg-green-50',\n  };\n  const colorClass = priorityColors[item.priority?.toLowerCase()] || 'border-gray-500 bg-gray-50';\n\n  return (\n    <div className={`relative ${colorClass} border-l-4 p-4 rounded-r-lg shadow-sm`}>\n      {/* The dot on the timeline */}\n      <div className=\"absolute -left-[1.625rem] top-4 w-6 h-6 bg-blue-500 rounded-full border-4 border-white\"></div>\n      \n      <div className=\"flex justify-between items-start\">\n        <div>\n          <h3 className=\"font-semibold text-lg text-gray-800\">{item.task}</h3>\n          <p className=\"text-blue-700 font-medium\">{item.startTime} - {item.endTime}</p>\n        </div>\n        {/* Task Completion Checkbox */}\n        <div className=\"flex items-center space-x-2\">\n          <label htmlFor={`task-${index}`} className=\"text-sm text-gray-500\">Done:</label>\n          <input type=\"checkbox\" id={`task-${index}`} className=\"h-5 w-5 text-blue-600 rounded border-gray-300 focus:ring-blue-500\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;"
        }
    ]
}