{
    "sourceFile": "src/services/geminiServices.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1762691996957,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1762692002352,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n // This is the correct, stable endpoint.\r\n const GEMINI_API_URL_BASE = \"https://generativelanguage.googleapis.com/v1/models/gemini-2.5-pro:generateContent?key=\";\r\n \r\n const FIXED_EVENTS = `\r\n-    - Sleep (12am - 8am)\r\n+    - Sleep (10am - 8am)\r\n     - Breakfast (8:30am - 9am)\r\n     - Lunch (1pm - 1:30pm)\r\n     - Dinner (7pm - 8pm)\r\n     - Shower (8am - 8:30am)\r\n"
                },
                {
                    "date": 1762692008406,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n // This is the correct, stable endpoint.\r\n const GEMINI_API_URL_BASE = \"https://generativelanguage.googleapis.com/v1/models/gemini-2.5-pro:generateContent?key=\";\r\n \r\n const FIXED_EVENTS = `\r\n-    - Sleep (10am - 8am)\r\n+    - Sleep (10am - 6am)\r\n     - Breakfast (8:30am - 9am)\r\n     - Lunch (1pm - 1:30pm)\r\n     - Dinner (7pm - 8pm)\r\n     - Shower (8am - 8:30am)\r\n"
                },
                {
                    "date": 1762692022977,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n // This is the correct, stable endpoint.\r\n const GEMINI_API_URL_BASE = \"https://generativelanguage.googleapis.com/v1/models/gemini-2.5-pro:generateContent?key=\";\r\n \r\n const FIXED_EVENTS = `\r\n-    - Sleep (10am - 6am)\r\n+    - Sleep (10m - 6am)\r\n     - Breakfast (8:30am - 9am)\r\n     - Lunch (1pm - 1:30pm)\r\n     - Dinner (7pm - 8pm)\r\n     - Shower (8am - 8:30am)\r\n"
                }
            ],
            "date": 1762691996957,
            "name": "Commit-0",
            "content": "// This is the correct, stable endpoint.\r\nconst GEMINI_API_URL_BASE = \"https://generativelanguage.googleapis.com/v1/models/gemini-2.5-pro:generateContent?key=\";\r\n\r\nconst FIXED_EVENTS = `\r\n    - Sleep (12am - 8am)\r\n    - Breakfast (8:30am - 9am)\r\n    - Lunch (1pm - 1:30pm)\r\n    - Dinner (7pm - 8pm)\r\n    - Shower (8am - 8:30am)\r\n`;\r\n\r\nexport const getAISchedule = async (taskInput, apiKey) => {\r\n    const prompt = `\r\n        You are an expert executive assistant. Your job is to create a complete, minute-by-minute 24-hour schedule.\r\n\r\n        CONTEXT:\r\n        - Today is ${new Date().toLocaleDateString()}.\r\n        - The user has these 'fixed' life events. These can be shifted slightly (15-30 mins) if a high-priority task conflicts, but they MUST be included:\r\n        ${FIXED_EVENTS}\r\n        \r\n        USER TASK LIST:\r\n        ${taskInput}\r\n\r\n        YOUR TASK:\r\n        1.  Analyze the user's task list.\r\n        2.  For any task without a specific time or duration, you MUST intelligently assign a 'startTime', 'estimatedDurationMinutes', and a 'priority' (low, medium, high).\r\n        3.  Tasks with a set time (e.g., \"Dentist at 3 PM\") MUST be scheduled at that time.\r\n        4.  Build a 24-hour schedule (from 00:00 to 23:59).\r\n        5.  Fill all empty slots. If there are no user tasks, fill the time with 'Focus Work', 'Break', 'Admin Tasks', or 'Personal Time'.\r\n        6.  Merge the user's tasks with the fixed events.\r\n        7.  The final schedule must be a gap-free list of events for the entire day.\r\n        8.  You MUST reply with ONLY a valid JSON array. Do not write any other text, explanation, or markdown.\r\n\r\n        OUTPUT FORMAT (JSON Array only):\r\n        [\r\n            {\r\n                \"task\": \"Task Name\",\r\n                \"startTime\": \"HH:MM\",\r\n                \"endTime\": \"HH:MM\",\r\n                \"priority\": \"high\"\r\n            }\r\n        ]\r\n    `;\r\n\r\n    const response = await fetch(GEMINI_API_URL_BASE + apiKey, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n            contents: [{ parts: [{ text: prompt }] }]\r\n        })\r\n    });\r\n\r\n    if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(`API Error: ${response.status} ${response.statusText} - ${errorData.error.message}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    \r\n    let jsonString = data.candidates[0].content.parts[0].text;\r\n    jsonString = jsonString.replace(/```json/g, \"\").replace(/```/g, \"\").trim();\r\n\r\n    const schedule = JSON.parse(jsonString);\r\n\r\n    // Sort schedule by start time and add a unique ID\r\n    schedule.sort((a, b) => a.startTime.localeCompare(b.startTime));\r\n    \r\n    return schedule.map((item, index) => ({\r\n        ...item,\r\n        id: `${item.startTime}-${item.task}-${index}` // Create a stable unique ID\r\n    }));\r\n};"
        }
    ]
}